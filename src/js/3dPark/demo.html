<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>Document</title>
</head>
<body>
	<div id="root">
		<div id="canvas" style="height: 600px;width: 1000px;"></div>
		<div id="leftPanel">
			<div class="sub-menu">
				<div v-for='item in model'>
					<span v-text='item.name' @click="selectModel(item.type),changeStat('modelHover'),setMenuState('addObject')"></span>
				</div>
			</div>
			<div class="sub-menu">
				<div v-for = 'item in setList' v-show='!item.added' @click="selectModel('parkingSet', item.name),setMenuState('addObject'),changeStat('modelHover'),addSet(item)">
					车位号: <span v-text='item.name'></span>
				</div>
			</div>
		</div>
		<div id="bottomPanel">
			<div class="addObject" v-if='state.addObject'>		
				<button @click="scene().state.fn.cancelMove(),changeStat('selectObject'),setMenuState('normal')">取消</button>
			</div>
			<div class="selected" v-if='state.selected'>
				<button @click="scene().state.fn.deleteObject(),setMenuState('normal')">删除</button>
				<button @click="scene().state.fn.modifyObject(),setMenuState('addObject')">移动</button>
			</div>
		</div>
		<button @click="changeStat('none')">none</button>
		<!-- size:<input type="text" v-model="scene.setting.user.brushSize.width">x<input type="text" v-model="scene.setting.user.brushSize.height"> -->
		<button @click="changeStat('floorHover')">floorHover</button>
		<button onclick='localStorage.clear()'>clear</button>
		<button onclick='console.dir(scene.saveData)'>saveData</button>

	</div>
	<script src = "../../plugin/three.js/three.js"></script>
	<script src = "lib/OrbitControls.js"></script>
	<script src = "lib/CopyShader.js"></script>
	<script src = "lib/EffectComposer.js"></script>
	<script src = "lib/RenderPass.js"></script>
	<script src = "lib/ShaderPass.js"></script>
	<script src = "lib/OutlinePass.js"></script>
	<script src = "lib/FXAAShader.js"></script>
	<script src = "lib/OBJLoader.js"></script>
	<script src = "../../plugin/vue/dist/vue.js"></script>
	<script src = "../../plugin/jquery/dist/jquery.js"></script>
	<script src = "init.js"></script>
	<script src = "load.js"></script>

	<script>
		var root = new Vue({
			el:"#root",
			data:{
				state:{
					addObject:false,
					normal:true,
					selected:false
				},
				setList: [{
				    name: '3D',
				    id: '1568413'
				}, {
				    name: '4F',
				    id: '25438648'
				}, {
				    name: '3E',
				    id: '152483'
				}, {
				    name: '3F',
				    id: '483645836'
				}],
				model: [{
					type: 'temp',
					name: '长方体',
					img: ''
				}, {
					type: 'red',
					name: '立方体',
					img: ''
				}, {
					type: 'blue',
					name: '十分色',
					img: ''
				}]
			},
			methods:{
				changeStat(s){
					scene.state.changeStateTo(s);
				},
				selectModel(m, id){
					scene.model.cur.geo = scene.model[m].geo.clone();
					scene.model.cur.mat = scene.model[m].mat.clone();
					scene.model.cur.size = scene.model[m].size;			
					scene.model.cur.option = scene.model[m].option;
					scene.model.cur.height = scene.model[m].height;
					scene.model.cur.type = m;
					if (id) {scene.model.cur.id = id;}
				},
				setMenuState(s){
					for(var i in this.state){
						this.state[i] = false;
					}
					this.state[s] = true;
				},
				scene(){
					return scene;
				},
				addSet(set){
					this.cb = function () {						
						set.added = true;
					};
				},
				removeSet(id){
					this.setList.forEach(function (v) {
						if (v.name === id) {
							v.added = false;
							return false;
						}
					});
				}
			},
			created(){
			},
			mounted(){
			}
		});
		var scene = new Scene();
		scene.load();
	</script>

</body>
</html>